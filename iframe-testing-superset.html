<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Static Iframe + Raw Header/CORS Observations</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root{--bg:#0d1117;--card:#161b22;--border:#30363d;--text:#e6edf3;--muted:#9da7b3;--accent:#4c8dff}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
  header{padding:16px}
  h1{margin:0 0 6px;font-size:18px}
  .sub{color:var(--muted);font-size:14px}
  .wrap{display:grid;gap:12px;padding:0 12px 12px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:10px;overflow:hidden}
  .head{display:flex;gap:8px;align-items:center;padding:10px;border-bottom:1px solid var(--border)}
  .body{padding:10px}
  .row{display:flex;gap:8px;align-items:center;width:100%}
  input[type=text]{flex:1;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#0b1320;color:var(--text)}
  input::placeholder{color:#6b768a}
  button{padding:10px 14px;border-radius:10px;border:1px solid var(--border);background:var(--accent);color:#fff;font-weight:600;cursor:pointer}
  button.ghost{background:transparent;color:var(--text)}
  iframe{width:100%;height:60vh;border:0;background:#0b0d12}
  pre.mono{font-family:ui-monospace,SFMono-Regular,Consolas,Menlo,monospace;font-size:12.5px;white-space:pre-wrap;word-break:break-word;background:#0b0f17;border:1px solid var(--border);border-radius:8px;padding:10px;margin:0}
  /* Thin curl bar */
  .curl-card .head{display:none}
  .curl-card .body{padding:8px 10px}
  .curl-card pre{max-height:42px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
  .curl-card .row{justify-content:flex-end}
</style>
</head>
<body>
<header>
  <h1>Static Iframe + Raw Header/CORS Observations</h1>
  <div class="sub">Loads URL in an iframe and attempts a same-URL <code>fetch()</code>. Shows raw data or <code>null</code> when unavailable.</div>
</header>

<div class="wrap">
  <!-- URL form + iframe -->
  <section class="card loader-card">
    <div class="head">
      <form id="urlForm" class="row">
        <input id="urlInput" type="text" placeholder="https://example.com" autocomplete="off" />
        <button type="submit">Load</button>
        <button type="button" class="ghost" id="clearBtn" title="Clear iframe">Clear</button>
      </form>
    </div>
    <div class="body">
      <iframe id="viewer" referrerpolicy="strict-origin-when-cross-origin"></iframe>
    </div>
  </section>

  <!-- Thin CURL bar below the iframe -->
  <section class="card curl-card">
    <div class="body" style="display:grid;gap:8px">
      <pre id="curlText" class="mono">curl -I 'https://example.com'</pre>
      <div class="row">
        <button type="button" id="copyCurlBtn">Copy</button>
      </div>
    </div>
  </section>
</div>
<script>
(function(){
  const form = document.getElementById('urlForm');
  const input = document.getElementById('urlInput');
  const iframe = document.getElementById('viewer');
  const clearBtn = document.getElementById('clearBtn');
  const curlText = document.getElementById('curlText');
  const copyCurlBtn = document.getElementById('copyCurlBtn');

  function buildCurl(url){
    const u = url || '';
    const quoted = `'${u.replace(/'/g, "'\\''")}'`;
    return `curl -I ${quoted}`.trim();
  }

  function updateCurlBox(url){
    curlText.textContent = buildCurl(url);
  }

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    let url = (input.value || '').trim();
    if (!url) return;
    if (!/^https?:\/\//i.test(url)) url = 'https://' + url;

    // Load iframe
    iframe.removeAttribute('src');
    setTimeout(() => {
      iframe.src = url;
      updateCurlBox(url);
    }, 0);
  });

  clearBtn.addEventListener('click', () => {
    iframe.removeAttribute('src');
  });

  copyCurlBtn && copyCurlBtn.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(curlText.textContent || '');
    } catch (e) {
      /* noop */
    }
  });

  // Boot with example.com preloaded
  document.addEventListener('DOMContentLoaded', () => {
    const defaultUrl = 'https://example.com';
    input.value = defaultUrl;
    updateCurlBox(defaultUrl);
    form.dispatchEvent(new Event('submit'));
  });
})();
</script>

</body>
</html>