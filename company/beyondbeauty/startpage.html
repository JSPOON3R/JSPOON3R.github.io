<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeyondBeauty Session Page</title>
    <style>
        body {
            background-image: url("https://member.beyondbeautyclub.com/_next/image?url=%2Fassets%2Fimages%2Fbbc-background.jpg&w=3840&q=75");
            position: fixed;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            width: 100%;
            margin: 0;
            font-family: Figtree, sans-serif;
            text-align: center;
        }

        .container {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 1em;
            width: 80%;
            max-width: 600px;
        }

        h2 {
            font-size: large;
            color: rgb(182, 128, 118);
            display: flex;
            text-align: center;
            font-weight: lighter;
            width: 100%;
            margin-bottom: 0;
            margin-top: 3%;
            margin-left: 3%;
            flex-wrap: wrap;
            display: flex;
            justify-content: center;
        }

        .btn {
            display: inline-block;
            color: #fff;
            cursor: pointer;
            background: rgb(182, 128, 118);
            width: 100%;
            height: fit-content;
            text-transform: uppercase;
            padding: 0.75rem;
            border-radius: 6px;
            border: 1px solid rgb(182, 128, 118);
            transition: all 0.3s ease 0s;
            outline: none;
            margin-top: 20px;
        }
    </style>
    <script>
           (function(s,u,r,f,l,y){s[f]=s[f]||{init:function(){s[f].q=arguments}};
    l=u.createElement(r);y=u.getElementsByTagName(r)[0];l.async=1;
    l.src='https://surfly.com/surfly.js';y.parentNode.insertBefore(l,y);})
    (window,document,'script','Surfly');

    Surfly.init( function(initResult) {
        if (initResult.success) {
            console.log('Surfly loaded in start page');
        } else {
            console.log('Surfly init failed in start page');
        }


        Surfly.on("session_started", ()=> {
            Surfly.on('message', function (session, event) {
                if (event.origin) {
                    console.error('Message received inside from: ', event.origin);
                    console.log('Message Received inside session:', event.data.message);
                }
            });
            Surfly.listSessions()[0].on('message', function(session, event) {
                      console.log("HELLO: "+event.data.message);
            });
        
    });});

    window.addEventListener('message', function (event) {
    if (event.origin) {
        console.log('Message received from '+ event.origin +': '+ event.data.params.msg.message);
        if (event.data.params.msg.message === "close tab") {
            window.close();
        }
        else {
            console.log("failed to close tab")
        }
    }
});
    </script>
</head>

<body>
    <div class="container">
        <h2>Please wait for your customer to join</h2>
        <button class="btn" onclick="window.close()">Copy Customer Link</button>
    </div>
</body>

</html>